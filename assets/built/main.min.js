!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";function i(c,o,u){(u=u||e||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){u.isPlainObject(t)&&(this.options=u.extend(!0,this.options,t))}),u.fn[c]=function(t){if("string"!=typeof t)return n=t,this.each(function(t,e){var i=u.data(e,c);i?(i.option(n),i._init()):(i=new o(e,n),u.data(e,c,i))}),this;var e,r,s,a,l,n,i=d.call(arguments,1);return s=i,l="$()."+c+'("'+(r=t)+'")',(e=this).each(function(t,e){var i,n,o=u.data(e,c);o?(i=o[r])&&"_"!=r.charAt(0)?(n=i.apply(o,s),a=void 0===a?n:a):h(l+" is not a valid method"):h(c+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==a?a:e},n(u))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var d=Array.prototype.slice,o=t.console,h=void 0===o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var r=i[o];n&&n[r]&&(this.off(t,r),delete n[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(c,r){var u={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;u.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},u.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},u.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,r(t,e))return t},u.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},u.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},u.filterFindElements=function(t,n){t=u.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);r(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}}),o},u.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,i=this;this[r]=setTimeout(function(){o.apply(i,e),delete i[r]},n)}},u.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},u.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var d=c.console;return u.htmlInit=function(a,l){u.docReady(function(){var t=u.toDashed(l),o="data-"+t,e=document.querySelectorAll("["+o+"]"),i=document.querySelectorAll(".js-"+t),n=u.makeArray(e).concat(u.makeArray(i)),r=o+"-options",s=c.jQuery;n.forEach(function(e){var t,i=e.getAttribute(o)||e.getAttribute(r);try{t=i&&JSON.parse(i)}catch(t){return void(d&&d.error("Error parsing "+o+" on "+e.className+": "+t))}var n=new a(e,t);s&&s.data(e,l,n)})})},u}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("ev-emitter"),require("fizzy-ui-utils")):i.InfiniteScroll=n(i,i.EvEmitter,i.fizzyUIUtils)}(window,function(e,t,o){function r(t,e){var i=o.getQueryElement(t);if(i){if((t=i).infiniteScrollGUID){var n=a[t.infiniteScrollGUID];return n.option(e),n}this.element=t,this.options=o.extend({},r.defaults),this.option(e),s&&(this.$element=s(this.element)),this.create()}else console.error("Bad element for InfiniteScroll: "+(i||t))}var s=e.jQuery,a={};r.defaults={},r.create={},r.destroy={};var i=r.prototype;o.extend(i,t.prototype);var n=0;i.create=function(){var t=this.guid=++n;if(this.element.infiniteScrollGUID=t,(a[t]=this).pageIndex=1,this.loadCount=0,this.updateGetPath(),this.getPath&&this.getPath())for(var e in this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit(),r.create)r.create[e].call(this);else console.error("Disabling InfiniteScroll")},i.option=function(t){o.extend(this.options,t)},i.callOnInit=function(){var t=this.options.onInit;t&&t.call(this,this)},i.dispatchEvent=function(t,e,i){this.log(t,i);var n,o,r=e?[e].concat(i):i;this.emitEvent(t,r),s&&this.$element&&(n=t+=".infiniteScroll",e&&((o=s.Event(e)).type=t,n=o),this.$element.trigger(n,i))};var l={initialized:function(t){return"on "+t},request:function(t){return"URL: "+t},load:function(t,e){return(t.title||"")+". URL: "+e},error:function(t,e){return t+". URL: "+e},append:function(t,e,i){return i.length+" items. URL: "+e},last:function(t,e){return"URL: "+e},history:function(t,e){return"URL: "+e},pageIndex:function(t,e){return"current page determined to be: "+t+" from "+e}};i.log=function(t,e){var i,n;this.options.debug&&(i="[InfiniteScroll] "+t,(n=l[t])&&(i+=". "+n.apply(this,e)),console.log(i))},i.updateMeasurements=function(){this.windowHeight=e.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+e.pageYOffset},i.updateScroller=function(){var t=this.options.elementScroll;if(t){if(this.scroller=!0===t?this.element:o.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t}else this.scroller=e},i.updateGetPath=function(){var t=this.options.path;if(t){var e=typeof t;if("function"!=e)return"string"==e&&t.match("{{#}}")?void this.updateGetPathTemplate(t):void this.updateGetPathSelector(t);this.getPath=t}else console.error("InfiniteScroll path option required. Set as: "+t)},i.updateGetPathTemplate=function(e){this.getPath=function(){var t=this.pageIndex+1;return e.replace("{{#}}",t)}.bind(this);var t=e.replace(/(\\\?|\?)/,"\\?").replace("{{#}}","(\\d\\d?\\d?)"),i=new RegExp(t),n=location.href.match(i);n&&(this.pageIndex=parseInt(n[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))};var c=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return i.updateGetPathSelector=function(t){var e=document.querySelector(t);if(e){for(var i,n,o=e.getAttribute("href"),r=0;o&&r<c.length;r++){n=c[r];var s=o.match(n);if(s){i=s.slice(1);break}}return i?(this.isPathSelector=!0,this.getPath=function(){var t=this.pageIndex+1;return i[0]+t+i[2]}.bind(this),this.pageIndex=parseInt(i[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void console.error("InfiniteScroll unable to parse next link href: "+o)}console.error("Bad InfiniteScroll path option. Next link not found: "+t)},i.updateGetAbsolutePath=function(){var t,e,i=this.getPath();i.match(/^http/)||i.match(/^\//)?this.getAbsolutePath=this.getPath:(t=location.pathname,i.match(/^\?/)?this.getAbsolutePath=function(){return t+this.getPath()}:(e=t.substring(0,t.lastIndexOf("/")),this.getAbsolutePath=function(){return e+"/"+this.getPath()}))},r.create.hideNav=function(){var t=o.getQueryElement(this.options.hideNav);t&&(t.style.display="none",this.nav=t)},r.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},i.destroy=function(){for(var t in this.allOff(),r.destroy)r.destroy[t].call(this);delete this.element.infiniteScrollGUID,delete a[this.guid],s&&this.$element&&s.removeData(this.element,"infiniteScroll")},r.throttle=function(n,o){var r,s;return o=o||200,function(){var t=+new Date,e=arguments,i=function(){r=t,n.apply(this,e)}.bind(this);r&&t<r+o?(clearTimeout(s),s=setTimeout(i,o)):i()}},r.data=function(t){var e=(t=o.getQueryElement(t))&&t.infiniteScrollGUID;return e&&a[e]},r.setJQuery=function(t){s=t},o.htmlInit(r,"infinite-scroll"),i._init=function(){},s&&s.bridget&&s.bridget("infiniteScroll",r),r}),function(e,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("./core")):i(e,e.InfiniteScroll)}(window,function(n,o){function s(t){for(var e=document.createDocumentFragment(),i=0;t&&i<t.length;i++)e.appendChild(t[i]);return e}function i(t){for(var e=t.querySelectorAll("script"),i=0;i<e.length;i++){var n=e[i],o=document.createElement("script");(function(t,e){for(var i=t.attributes,n=0;n<i.length;n++){var o=i[n];e.setAttribute(o.name,o.value)}})(n,o),o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n)}}var t=o.prototype;return o.defaults.loadOnScroll=!0,o.defaults.checkLastPage=!0,o.defaults.responseType="document",o.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},t.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},t.loadNextPage=function(){var e,t,i,n,o,r,s,a,l,c;!this.isLoading&&this.canLoad&&(e=this.getAbsolutePath(),this.isLoading=!0,t=function(t){this.onPageLoad(t,e)}.bind(this),i=function(t){this.onPageError(t,e)}.bind(this),n=function(t){this.lastPageReached(t,e)}.bind(this),o=e,r=this.options.responseType,s=t,a=i,l=n,(c=new XMLHttpRequest).open("GET",o,!0),c.responseType=r||"",c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.onload=function(){var t;200==c.status?s(c.response):204==c.status?l(c.response):(t=new Error(c.statusText),a(t))},c.onerror=function(){var t=new Error("Network error requesting "+o);a(t)},c.send(),this.dispatchEvent("request",null,[e]))},t.onPageLoad=function(t,e){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[t,e]),this.appendNextPage(t,e),t},t.appendNextPage=function(t,e){var i,n,o,r=this.options.append;"document"==this.options.responseType&&r&&(i=t.querySelectorAll(r),n=s(i),o=function(){this.appendItems(i,n),this.isLoading=!1,this.dispatchEvent("append",null,[t,e,i])}.bind(this),this.options.outlayer?this.appendOutlayerItems(n,o):o())},t.appendItems=function(t,e){t&&t.length&&(i(e=e||s(t)),this.element.appendChild(e))},t.appendOutlayerItems=function(t,e){var i=o.imagesLoaded||n.imagesLoaded;return i?void i(t,e):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},t.onAppendOutlayer=function(t,e,i){this.options.outlayer.appended(i)},t.checkLastPage=function(t,e){var i=this.options.checkLastPage;if(i){var n,o=this.options.path;if("function"==typeof o)if(!this.getPath())return void this.lastPageReached(t,e);"string"==typeof i?n=i:this.isPathSelector&&(n=o),n&&t.querySelector&&(t.querySelector(n)||this.lastPageReached(t,e))}},t.lastPageReached=function(t,e){this.canLoad=!1,this.dispatchEvent("last",null,[t,e])},t.onPageError=function(t,e){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[t,e]),t},o.create.prefill=function(){if(this.options.prefill){var t=this.options.append;if(!t)return void console.error("append option required for prefill. Set as :"+t);this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},t.prefill=function(){var t=this.getPrefillDistance();this.isPrefilling=0<=t,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},t.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},t.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},o}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(i,t,e){var n=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var t=this.options.scrollThreshold;!t&&0!==t||this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},n.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},n.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},n.bindScrollWatchEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.pageScrollHandler),i[e]("resize",this.resizeHandler)},n.onPageScroll=t.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),n.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},n.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(i.pageYOffset+this.windowHeight)},n.getElementBottomDistance=function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)},n.onResize=function(){this.updateMeasurements()},e.debounceMethod(t,"onResize",150),t}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(n,t,e){var i=t.prototype;t.defaults.history="replace";var r=document.createElement("a");return t.create.history=function(){if(this.options.history)return r.href=this.getAbsolutePath(),(r.origin||r.protocol+"//"+r.host)==location.origin?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+r.origin+" on "+location.origin+" . History behavior disabled.")},i.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},i.bindHistoryAppendEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.scrollHistoryHandler),n[e]("unload",this.unloadHandler)},i.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=i.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)},i.onAppendHistory=function(t,e,i){var n,o;i&&i.length&&(n=i[0],o=this.getElementScrollY(n),r.href=e,this.scrollPages.push({top:o,path:r.href,title:t.title}))},i.getElementScrollY=function(t){return this.options.elementScroll?this.getElementElementScrollY(t):this.getElementWindowScrollY(t)},i.getElementWindowScrollY=function(t){return t.getBoundingClientRect().top+n.pageYOffset},i.getElementElementScrollY=function(t){return t.offsetTop-this.top},i.onScrollHistory=function(){for(var t,e,i=this.getScrollViewY(),n=0;n<this.scrollPages.length;n++){var o=this.scrollPages[n];if(o.top>=i)break;t=n,e=o}t!=this.scrollPageIndex&&(this.scrollPageIndex=t,this.setHistory(e.title,e.path))},e.debounceMethod(t,"onScrollHistory",150),i.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:n.pageYOffset+this.windowHeight/2},i.setHistory=function(t,e){var i=this.options.history;i&&history[i+"State"]&&(history[i+"State"](null,t,e),this.options.historyTitle&&(document.title=t),this.dispatchEvent("history",null,[t,e]))},i.onUnload=function(){var t,e,i=this.scrollPageIndex;0!==i&&(t=this.scrollPages[i],e=n.pageYOffset-t.top+this.top,this.destroyHistory(),scrollTo(0,e))},i.onPageLoadHistory=function(t,e){this.setHistory(t.title,e)},t}),function(t,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./core"),require("fizzy-ui-utils")):i(0,t.InfiniteScroll,t.fizzyUIUtils)}(window,function(t,e,i){function n(t,e){this.element=t,this.infScroll=e,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),e.on("request",this.disable.bind(this)),e.on("load",this.enable.bind(this)),e.on("error",this.hide.bind(this)),e.on("last",this.hide.bind(this))}return e.create.button=function(){var t=i.getQueryElement(this.options.button);t&&(this.button=new n(t,this))},e.destroy.button=function(){this.button&&this.button.destroy()},n.prototype.onClick=function(t){t.preventDefault(),this.infScroll.loadNextPage()},n.prototype.enable=function(){this.element.removeAttribute("disabled")},n.prototype.disable=function(){this.element.disabled="disabled"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},e.Button=n,e}),function(t,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./core"),require("fizzy-ui-utils")):i(0,t.InfiniteScroll,t.fizzyUIUtils)}(window,function(t,e,i){function n(t){r(t,"none")}function o(t){r(t,"block")}function r(t,e){t&&(t.style.display=e)}var s=e.prototype;return e.create.status=function(){var t=i.getQueryElement(this.options.status);t&&(this.statusElement=t,this.statusEventElements={request:t.querySelector(".infinite-scroll-request"),error:t.querySelector(".infinite-scroll-error"),last:t.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},s.bindHideStatus=function(t){var e=this.options.append?"append":"load";this[t](e,this.hideAllStatus)},s.showRequestStatus=function(){this.showStatus("request")},s.showErrorStatus=function(){this.showStatus("error")},s.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},s.showStatus=function(t){o(this.statusElement),this.hideStatusEventElements(),o(this.statusEventElements[t])},s.hideAllStatus=function(){n(this.statusElement),this.hideStatusEventElements()},s.hideStatusEventElements=function(){for(var t in this.statusEventElements){n(this.statusEventElements[t])}},e}),function(t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}((window,function(t){return t})),function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function r(t,e){for(var i in e)t[i]=e[i];return t}function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);var n,o=t;return"string"==typeof t&&(o=document.querySelectorAll(t)),o?(this.elements=(n=o,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?c.call(n):[n]),this.options=r({},this.options),"function"==typeof e?i=e:r(this.options,e),i&&this.on("always",i),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void l.error("Bad element for imagesLoaded "+(o||t))}function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}var a=e.jQuery,l=e.console,c=Array.prototype.slice;(s.prototype=Object.create(t.prototype)).options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&u[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background)for(var r=t.querySelectorAll(this.options.background),n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}};var u={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new i(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new n(t,e);this.images.push(i)},s.prototype.check=function(){function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},s.prototype.complete=function(){var t,e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(s.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((a=t).fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(a(this))})})(),s}),function(r){"use strict";r.fn.fitVids=function(t){var e,i,o={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(e=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',e.appendChild(i.childNodes[1])),t&&r.extend(o,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];o.customSelector&&t.push(o.customSelector);var n=".fitvidsignore";o.ignore&&(n=n+", "+o.ignore);var e=r(this).find(t.join(","));(e=(e=e.not("object object")).not(n)).each(function(){var t,e,i=r(this);0<i.parents(n).length||"embed"===this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid-width-video-wrapper").length||(i.css("height")||i.css("width")||!isNaN(i.attr("height"))&&!isNaN(i.attr("width"))||(i.attr("height",9),i.attr("width",16)),t=("object"===this.tagName.toLowerCase()||i.attr("height")&&!isNaN(parseInt(i.attr("height"),10))?parseInt(i.attr("height"),10):i.height())/(isNaN(parseInt(i.attr("width"),10))?i.width():parseInt(i.attr("width"),10)),i.attr("name")||(e="fitvid"+r.fn.fitVids._count,i.attr("name",e),r.fn.fitVids._count++),i.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*t+"%"),i.removeAttr("height").removeAttr("width"))})})},r.fn.fitVids._count=0}(window.jQuery||window.Zepto),function(t){var e=function(c,R){"use strict";var M,U;if(function(){var t,e={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};U=c.lazySizesConfig||c.lazysizesConfig||{};for(t in e)t in U||(U[t]=e[t])}(),!R||!R.getElementsByClassName)return{init:function(){},cfg:U,noSupport:!0};var O=R.documentElement,u=c.Date,n=c.HTMLPictureElement,D="addEventListener",_="getAttribute",B=c[D],W=c.setTimeout,Q=c.requestAnimationFrame||W,a=c.requestIdleCallback,F=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],i={},$=Array.prototype.forEach,G=function(t,e){return i[e]||(i[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),i[e].test(t[_]("class")||"")&&i[e]},X=function(t,e){G(t,e)||t.setAttribute("class",(t[_]("class")||"").trim()+" "+e)},Y=function(t,e){var i;(i=G(t,e))&&t.setAttribute("class",(t[_]("class")||"").replace(i," "))},V=function(e,i,t){var n=t?D:"removeEventListener";t&&V(e,i),o.forEach(function(t){e[n](t,i)})},J=function(t,e,i,n,o){var r=R.createEvent("Event");return i||(i={}),i.instance=M,r.initEvent(e,!n,!o),r.detail=i,t.dispatchEvent(r),r},K=function(t,e){var i;!n&&(i=c.picturefill||U.pf)?(e&&e.src&&!t[_]("srcset")&&t.setAttribute("srcset",e.src),i({reevaluate:!0,elements:[t]})):e&&e.src&&(t.src=e.src)},Z=function(t,e){return(getComputedStyle(t,null)||{})[e]},s=function(t,e,i){for(i=i||t.offsetWidth;i<U.minSize&&e&&!t._lazysizesWidth;)i=e.offsetWidth,e=e.parentNode;return i},tt=function(){var i,n,e=[],o=[],r=e,s=function(){var t=r;for(r=e.length?o:e,i=!0,n=!1;t.length;)t.shift()();i=!1},t=function(t,e){i&&!e?t.apply(this,arguments):(r.push(t),n||(n=!0,(R.hidden?W:Q)(s)))};return t._lsFlush=s,t}(),et=function(i,t){return t?function(){tt(i)}:function(){var t=this,e=arguments;tt(function(){i.apply(t,e)})}},it=function(t){var i,n=0,o=U.throttleDelay,r=U.ricTimeout,e=function(){i=!1,n=u.now(),t()},s=a&&r>49?function(){a(e,{timeout:r}),r!==U.ricTimeout&&(r=U.ricTimeout)}:et(function(){W(e)},!0);return function(t){var e;(t=!0===t)&&(r=33),i||(i=!0,e=o-(u.now()-n),e<0&&(e=0),t||e<9?s():W(s,e))}},nt=function(t){var e,i,n=99,o=function(){e=null,t()},r=function(){var t=u.now()-i;t<n?W(r,n-t):(a||o)(o)};return function(){i=u.now(),e||(e=W(r,n))}},t=function(){var f,p,d,m,t,g,y,v,b,w,E,S,r=/^img$/i,h=/^iframe$/i,x="onscroll"in c&&!/(gle|ing)bot/.test(navigator.userAgent),A=0,j=0,L=0,P=-1,q=function(t){L--,(!t||L<0||!t.target)&&(L=0)},z=function(t){return null==S&&(S="hidden"==Z(R.body,"visibility")),S||!("hidden"==Z(t.parentNode,"visibility")&&"hidden"==Z(t,"visibility"))},C=function(t,e){var i,n=t,o=z(t);for(v-=e,E+=e,b-=e,w+=e;o&&(n=n.offsetParent)&&n!=R.body&&n!=O;)(o=(Z(n,"opacity")||1)>0)&&"visible"!=Z(n,"overflow")&&(i=n.getBoundingClientRect(),o=w>i.left&&b<i.right&&E>i.top-1&&v<i.bottom+1);return o},e=function(){var t,e,i,n,o,r,s,a,l,c,u,d,h=M.elements;if((m=U.loadMode)&&L<8&&(t=h.length)){for(e=0,P++;e<t;e++)if(h[e]&&!h[e]._lazyRace)if(!x||M.prematureUnveil&&M.prematureUnveil(h[e]))N(h[e]);else if((a=h[e][_]("data-expand"))&&(r=1*a)||(r=j),c||(c=!U.expand||U.expand<1?O.clientHeight>500&&O.clientWidth>500?500:370:U.expand,M._defEx=c,u=c*U.expFactor,d=U.hFac,S=null,j<u&&L<1&&P>2&&m>2&&!R.hidden?(j=u,P=0):j=m>1&&P>1&&L<6?c:A),l!==r&&(g=innerWidth+r*d,y=innerHeight+r,s=-1*r,l=r),i=h[e].getBoundingClientRect(),(E=i.bottom)>=s&&(v=i.top)<=y&&(w=i.right)>=s*d&&(b=i.left)<=g&&(E||w||b||v)&&(U.loadHidden||z(h[e]))&&(p&&L<3&&!a&&(m<3||P<4)||C(h[e],r))){if(N(h[e]),o=!0,L>9)break}else!o&&p&&!n&&L<4&&P<4&&m>2&&(f[0]||U.preloadAfterLoad)&&(f[0]||!a&&(E||w||b||v||"auto"!=h[e][_](U.sizesAttr)))&&(n=f[0]||h[e]);n&&!o&&N(n)}},i=it(e),T=function(t){var e=t.target;if(e._lazyCache)return void delete e._lazyCache;q(t),X(e,U.loadedClass),Y(e,U.loadingClass),V(e,I),J(e,"lazyloaded")},n=et(T),I=function(t){n({target:t.target})},k=function(e,i){try{e.contentWindow.location.replace(i)}catch(t){e.src=i}},H=function(t){var e,i=t[_](U.srcsetAttr);(e=U.customMedia[t[_]("data-media")||t[_]("media")])&&t.setAttribute("media",e),i&&t.setAttribute("srcset",i)},s=et(function(e,t,i,n,o){var r,s,a,l,c,u;(c=J(e,"lazybeforeunveil",t)).defaultPrevented||(n&&(i?X(e,U.autosizesClass):e.setAttribute("sizes",n)),s=e[_](U.srcsetAttr),r=e[_](U.srcAttr),o&&(a=e.parentNode,l=a&&F.test(a.nodeName||"")),u=t.firesLoad||"src"in e&&(s||r||l),c={target:e},X(e,U.loadingClass),u&&(clearTimeout(d),d=W(q,2500),V(e,I,!0)),l&&$.call(a.getElementsByTagName("source"),H),s?e.setAttribute("srcset",s):r&&!l&&(h.test(e.nodeName)?k(e,r):e.src=r),o&&(s||l)&&K(e,{src:r})),e._lazyRace&&delete e._lazyRace,Y(e,U.lazyClass),tt(function(){var t=e.complete&&e.naturalWidth>1;u&&!t||(t&&X(e,"ls-is-cached"),T(c),e._lazyCache=!0,W(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&L--},!0)}),N=function(t){if(!t._lazyRace){var e,i=r.test(t.nodeName),n=i&&(t[_](U.sizesAttr)||t[_]("sizes")),o="auto"==n;(!o&&p||!i||!t[_]("src")&&!t.srcset||t.complete||G(t,U.errorClass)||!G(t,U.lazyClass))&&(e=J(t,"lazyunveilread").detail,o&&ot.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,L++,s(t,e,o,n,i))}},o=nt(function(){U.loadMode=3,i()}),a=function(){3==U.loadMode&&(U.loadMode=2),o()},l=function(){if(!p){if(u.now()-t<999)return void W(l,999);p=!0,U.loadMode=3,i(),B("scroll",a,!0)}};return{_:function(){t=u.now(),M.elements=R.getElementsByClassName(U.lazyClass),f=R.getElementsByClassName(U.lazyClass+" "+U.preloadClass),B("scroll",i,!0),B("resize",i,!0),B("pageshow",function(t){if(t.persisted){var e=R.querySelectorAll("."+U.loadingClass);e.length&&e.forEach&&Q(function(){e.forEach(function(t){t.complete&&N(t)})})}}),c.MutationObserver?new MutationObserver(i).observe(O,{childList:!0,subtree:!0,attributes:!0}):(O[D]("DOMNodeInserted",i,!0),O[D]("DOMAttrModified",i,!0),setInterval(i,999)),B("hashchange",i,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){R[D](t,i,!0)}),/d$|^c/.test(R.readyState)?l():(B("load",l),R[D]("DOMContentLoaded",i),W(l,2e4)),M.elements.length?(e(),tt._lsFlush()):i()},checkElems:i,unveil:N,_aLSL:a}}(),ot=function(){var i,r=et(function(t,e,i,n){var o,r,s;if(t._lazysizesWidth=n,n+="px",t.setAttribute("sizes",n),F.test(e.nodeName||""))for(o=e.getElementsByTagName("source"),r=0,s=o.length;r<s;r++)o[r].setAttribute("sizes",n);i.detail.dataAttr||K(t,i.detail)}),n=function(t,e,i){var n,o=t.parentNode;o&&(i=s(t,o,i),n=J(t,"lazybeforesizes",{width:i,dataAttr:!!e}),n.defaultPrevented||(i=n.detail.width)&&i!==t._lazysizesWidth&&r(t,o,n,i))},t=function(){var t,e=i.length;if(e)for(t=0;t<e;t++)n(i[t])},e=nt(t);return{_:function(){i=R.getElementsByClassName(U.autosizesClass),B("resize",e)},checkElems:e,updateElem:n}}(),e=function(){!e.i&&R.getElementsByClassName&&(e.i=!0,ot._(),t._())};return W(function(){U.init&&e()}),M={cfg:U,autoSizer:ot,loader:t,init:e,uP:K,aC:X,rC:Y,hC:G,fire:J,gW:s,rAF:tt}}(t,t.document);t.lazySizes=e,"object"==typeof module&&module.exports&&(module.exports=e)}("undefined"!=typeof window?window:{}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Pjax=t()}(function(){return function r(s,a,l){function c(e,t){if(!a[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[e]={exports:{}};s[e][0].call(o.exports,function(t){return c(s[e][1][t]||t)},o,o.exports,r,s,a,l)}return a[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(o,t,e){function i(t){this.state={numPendingSwitches:0,href:null,options:null},this.options=n(t),this.log("Pjax options",this.options),this.options.scrollRestoration&&"scrollRestoration"in history&&(history.scrollRestoration="manual"),this.maxUid=this.lastUid=l(),this.parseDOM(document),c(window,"popstate",function(t){var e;t.state&&((e=d(this.options)).url=t.state.url,e.title=t.state.title,e.history=!1,e.scrollPos=t.state.scrollPos,t.state.uid<this.lastUid?e.backward=!0:e.forward=!0,this.lastUid=t.state.uid,this.loadUrl(t.state.url,e))}.bind(this))}var s=o("./lib/execute-scripts"),a=o("./lib/foreach-els"),n=o("./lib/parse-options"),r=o("./lib/switches"),l=o("./lib/uniqueid"),c=o("./lib/events/on"),u=o("./lib/events/trigger"),d=o("./lib/util/clone"),h=o("./lib/util/contains"),f=o("./lib/util/extend"),p=o("./lib/util/noop");if(i.switches=r,i.prototype={log:o("./lib/proto/log"),getElements:function(t){return t.querySelectorAll(this.options.elements)},parseDOM:function(t){var e=o("./lib/proto/parse-element");a(this.getElements(t),e,this)},refresh:function(t){this.parseDOM(t||document)},reload:function(){window.location.reload()},attachLink:o("./lib/proto/attach-link"),attachForm:o("./lib/proto/attach-form"),forEachSelectors:function(t,e,i){return o("./lib/foreach-selectors").bind(this)(this.options.selectors,t,e,i)},switchSelectors:function(t,e,i,n){return o("./lib/switches-selectors").bind(this)(this.options.switches,this.options.switchesOptions,t,e,i,n)},latestChance:function(t){window.location=t},onSwitch:function(){u(window,"resize scroll"),this.state.numPendingSwitches--,0===this.state.numPendingSwitches&&this.afterAllSwitches()},loadContent:function(t,e){if("string"==typeof t){var i=document.implementation.createHTMLDocument("pjax"),n=t.match(/<html[^>]+>/gi);if(n&&n.length&&(n=n[0].match(/\s?[a-z:]+(?:=['"][^'">]+['"])*/gi)).length&&(n.shift(),n.forEach(function(t){var e=t.trim().split("=");1===e.length?i.documentElement.setAttribute(e[0],!0):i.documentElement.setAttribute(e[0],e[1].slice(1,-1))})),i.documentElement.innerHTML=t,this.log("load content",i.documentElement.attributes,i.documentElement.innerHTML.length),document.activeElement&&h(document,this.options.selectors,document.activeElement))try{document.activeElement.blur()}catch(t){}this.switchSelectors(this.options.selectors,i,document,e)}else u(document,"pjax:complete pjax:error",e)},abortRequest:o("./lib/abort-request"),doRequest:o("./lib/send-request"),handleResponse:o("./lib/proto/handle-response"),loadUrl:function(t,e){e="object"==typeof e?f({},this.options,e):d(this.options),this.log("load href",t,e),this.abortRequest(this.request),u(document,"pjax:send",e),this.request=this.doRequest(t,e,this.handleResponse.bind(this))},afterAllSwitches:function(){var t=Array.prototype.slice.call(document.querySelectorAll("[autofocus]")).pop();t&&document.activeElement!==t&&t.focus(),this.options.selectors.forEach(function(t){a(document.querySelectorAll(t),function(t){s(t)})});var e=this.state;if(e.options.history&&(window.history.state||(this.lastUid=this.maxUid=l(),window.history.replaceState({url:window.location.href,title:document.title,uid:this.maxUid,scrollPos:[0,0]},document.title)),this.lastUid=this.maxUid=l(),window.history.pushState({url:e.href,title:e.options.title,uid:this.maxUid,scrollPos:[0,0]},e.options.title,e.href)),this.forEachSelectors(function(t){this.parseDOM(t)},this),u(document,"pjax:complete pjax:success",e.options),"function"==typeof e.options.analytics&&e.options.analytics(),e.options.history){var i=document.createElement("a");if(i.href=this.state.href,i.hash){var n=i.hash.slice(1),n=decodeURIComponent(n),o=0,r=document.getElementById(n)||document.getElementsByName(n)[0];if(r&&r.offsetParent)for(;o+=r.offsetTop,r=r.offsetParent;);window.scrollTo(0,o)}else!1!==e.options.scrollTo&&(1<e.options.scrollTo.length?window.scrollTo(e.options.scrollTo[0],e.options.scrollTo[1]):window.scrollTo(0,e.options.scrollTo))}else e.options.scrollRestoration&&e.options.scrollPos&&window.scrollTo(e.options.scrollPos[0],e.options.scrollPos[1]);this.state={numPendingSwitches:0,href:null,options:null}}},i.isSupported=o("./lib/is-supported"),i.isSupported())t.exports=i;else{var m,g=p;for(m in i.prototype)i.prototype.hasOwnProperty(m)&&"function"==typeof i.prototype[m]&&(g[m]=p);t.exports=g}},{"./lib/abort-request":2,"./lib/events/on":4,"./lib/events/trigger":5,"./lib/execute-scripts":6,"./lib/foreach-els":7,"./lib/foreach-selectors":8,"./lib/is-supported":9,"./lib/parse-options":10,"./lib/proto/attach-form":11,"./lib/proto/attach-link":12,"./lib/proto/handle-response":13,"./lib/proto/log":14,"./lib/proto/parse-element":15,"./lib/send-request":16,"./lib/switches":18,"./lib/switches-selectors":17,"./lib/uniqueid":19,"./lib/util/clone":20,"./lib/util/contains":21,"./lib/util/extend":22,"./lib/util/noop":23}],2:[function(t,e,i){var n=t("./util/noop");e.exports=function(t){t&&t.readyState<4&&(t.onreadystatechange=n,t.abort())}},{"./util/noop":23}],3:[function(t,e,i){e.exports=function(t){var e=t.text||t.textContent||t.innerHTML||"",i=t.src||"",n=t.parentNode||document.querySelector("head")||document.documentElement,o=document.createElement("script");if(e.match("document.write"))return console&&console.log&&console.log("Script contains document.write. Can’t be executed correctly. Code skipped ",t),!1;if(o.type="text/javascript",o.id=t.id,""!==i&&(o.src=i,o.async=!1),""!==e)try{o.appendChild(document.createTextNode(e))}catch(t){o.text=e}return n.appendChild(o),(n instanceof HTMLHeadElement||n instanceof HTMLBodyElement)&&n.contains(o)&&n.removeChild(o),!0}},{}],4:[function(t,e,i){var o=t("../foreach-els");e.exports=function(t,e,i,n){(e="string"==typeof e?e.split(" "):e).forEach(function(e){o(t,function(t){t.addEventListener(e,i,n)})})}},{"../foreach-els":7}],5:[function(t,e,i){var o=t("../foreach-els");e.exports=function(e,t,n){(t="string"==typeof t?t.split(" "):t).forEach(function(t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),i.eventName=t,n&&Object.keys(n).forEach(function(t){i[t]=n[t]}),o(e,function(t){var e=!1;t.parentNode||t===document||t===window||(e=!0,document.body.appendChild(t)),t.dispatchEvent(i),e&&t.parentNode.removeChild(t)})})}},{"../foreach-els":7}],6:[function(t,e,i){var n=t("./foreach-els"),o=t("./eval-script");e.exports=function(t){"script"===t.tagName.toLowerCase()&&o(t),n(t.querySelectorAll("script"),function(t){t.type&&"text/javascript"!==t.type.toLowerCase()||(t.parentNode&&t.parentNode.removeChild(t),o(t))})}},{"./eval-script":3,"./foreach-els":7}],7:[function(t,e,i){e.exports=function(t,e,i){return t instanceof HTMLCollection||t instanceof NodeList||t instanceof Array?Array.prototype.forEach.call(t,e,i):e.call(i,t)}},{}],8:[function(t,e,i){var o=t("./foreach-els");e.exports=function(t,e,i,n){n=n||document,t.forEach(function(t){o(n.querySelectorAll(t),e,i)})}},{"./foreach-els":7}],9:[function(t,e,i){e.exports=function(){return window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)}},{}],10:[function(t,e,i){var n=t("./switches");function o(){window._gaq&&_gaq.push(["_trackPageview"]),window.ga&&ga("send","pageview",{page:location.pathname,title:document.title})}e.exports=function(t){return(t=t||{}).elements=t.elements||"a[href], form[action]",t.selectors=t.selectors||["title",".js-Pjax"],t.switches=t.switches||{},t.switchesOptions=t.switchesOptions||{},t.history=void 0===t.history||t.history,t.analytics="function"==typeof t.analytics||!1===t.analytics?t.analytics:o,t.scrollTo=void 0===t.scrollTo?0:t.scrollTo,t.scrollRestoration=void 0===t.scrollRestoration||t.scrollRestoration,t.cacheBust=void 0===t.cacheBust||t.cacheBust,t.debug=t.debug||!1,t.timeout=t.timeout||0,t.currentUrlFullReload=void 0!==t.currentUrlFullReload&&t.currentUrlFullReload,t.switches.head||(t.switches.head=n.switchElementsAlt),t.switches.body||(t.switches.body=n.switchElementsAlt),t}},{"./switches":18}],11:[function(t,e,i){function n(t,e){var i,n,o;a(e)||((i=r(this.options)).requestOptions={requestUrl:t.getAttribute("action")||window.location.href,requestMethod:t.getAttribute("method")||"GET"},(n=document.createElement("a")).setAttribute("href",i.requestOptions.requestUrl),(o=function(t,e){if(t.protocol!==window.location.protocol||t.host!==window.location.host)return"external";if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,""))return"anchor";if(t.href===window.location.href.split("#")[0]+"#")return"anchor-empty";if(e.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return"reload"}(n,i))?t.setAttribute(s,o):(e.preventDefault(),"multipart/form-data"===t.enctype?i.requestOptions.formData=new FormData(t):i.requestOptions.requestParams=function(t){for(var e,i=[],n=t.elements,o=0;o<n.length;o++){var r=n[o],s=r.tagName.toLowerCase();if(r.name&&void 0!==r.attributes&&"button"!==s){var a=r.attributes.type;if(!a||"checkbox"!==a.value&&"radio"!==a.value||r.checked){var l=[];if("select"===s)for(var c=0;c<r.options.length;c++)(e=r.options[c]).selected&&!e.disabled&&l.push(e.hasAttribute("value")?e.value:e.text);else l.push(r.value);for(var u=0;u<l.length;u++)i.push({name:encodeURIComponent(r.name),value:encodeURIComponent(l[u])})}}}return i}(t),t.setAttribute(s,"submit"),i.triggerElement=t,this.loadUrl(n.href,i)))}var o=t("../events/on"),r=t("../util/clone"),s="data-pjax-state";var a=function(t){return t.defaultPrevented||!1===t.returnValue};e.exports=function(e){var i=this;e.setAttribute(s,""),o(e,"submit",function(t){n.call(i,e,t)})}},{"../events/on":4,"../util/clone":20}],12:[function(t,e,i){function n(t,e){if(!a(e)){var i=r(this.options),n=function(t,e){if(1<e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return"modifier";if(t.protocol!==window.location.protocol||t.host!==window.location.host)return"external";if(t.hash&&t.href.replace(t.hash,"")===window.location.href.replace(location.hash,""))return"anchor";if(t.href===window.location.href.split("#")[0]+"#")return"anchor-empty"}(t,e);if(n)t.setAttribute(s,n);else{if(e.preventDefault(),this.options.currentUrlFullReload&&t.href===window.location.href.split("#")[0])return t.setAttribute(s,"reload"),void this.reload();t.setAttribute(s,"load"),i.triggerElement=t,this.loadUrl(t.href,i)}}}var o=t("../events/on"),r=t("../util/clone"),s="data-pjax-state";var a=function(t){return t.defaultPrevented||!1===t.returnValue};e.exports=function(e){var i=this;e.setAttribute(s,""),o(e,"click",function(t){n.call(i,e,t)}),o(e,"keyup",function(t){13===t.keyCode&&n.call(i,e,t)}.bind(this))}},{"../events/on":4,"../util/clone":20}],13:[function(t,e,i){var l=t("../util/clone"),c=t("../uniqueid"),u=t("../events/trigger");e.exports=function(t,e,i,n){if((n=l(n||this.options)).request=e,!1!==t){var o=window.history.state||{};window.history.replaceState({url:o.url||window.location.href,title:o.title||document.title,uid:o.uid||c(),scrollPos:[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]},document.title,window.location.href);var r=i;e.responseURL?i!==e.responseURL&&(i=e.responseURL):e.getResponseHeader("X-PJAX-URL")?i=e.getResponseHeader("X-PJAX-URL"):e.getResponseHeader("X-XHR-Redirected-To")&&(i=e.getResponseHeader("X-XHR-Redirected-To"));var s=document.createElement("a");s.href=r;var a=s.hash;s.href=i,a&&!s.hash&&(s.hash=a,i=s.href),this.state.href=i,this.state.options=n;try{this.loadContent(t,n)}catch(t){if(u(document,"pjax:error",n),this.options.debug)throw t;return console&&console.error&&console.error("Pjax switch fail: ",t),this.latestChance(i)}}else u(document,"pjax:complete pjax:error",n)}},{"../events/trigger":5,"../uniqueid":19,"../util/clone":20}],14:[function(t,e,i){e.exports=function(){this.options.debug&&console&&("function"==typeof console.log?console.log.apply(console,arguments):console.log&&console.log(arguments))}},{}],15:[function(t,e,i){var n="data-pjax-state";e.exports=function(t){switch(t.tagName.toLowerCase()){case"a":t.hasAttribute(n)||this.attachLink(t);break;case"form":t.hasAttribute(n)||this.attachForm(t);break;default:throw"Pjax can only be applied on <a> or <form> submit"}}},{}],16:[function(t,e,i){var d=t("./util/update-query-string");e.exports=function(e,i,n){var t,o=(i=i||{}).requestOptions||{},r=(o.requestMethod||"GET").toUpperCase(),s=o.requestParams||null,a=o.formData||null,l=null,c=new XMLHttpRequest,u=i.timeout||0;if(c.onreadystatechange=function(){4===c.readyState&&(200===c.status?n(c.responseText,c,e,i):0!==c.status&&n(null,c,e,i))},c.onerror=function(t){console.log(t),n(null,c,e,i)},c.ontimeout=function(){n(null,c,e,i)},s&&s.length)switch(t=s.map(function(t){return t.name+"="+t.value}).join("&"),r){case"GET":e=e.split("?")[0],e+="?"+t;break;case"POST":l=t}else a&&(l=a);return i.cacheBust&&(e=d(e,"t",Date.now())),c.open(r,e,!0),c.timeout=u,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-PJAX","true"),c.setRequestHeader("X-PJAX-Selectors",JSON.stringify(i.selectors)),l&&"POST"===r&&!a&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(l),c}},{"./util/update-query-string":24}],17:[function(t,e,i){var n=t("./foreach-els"),u=t("./switches");e.exports=function(s,a,t,e,i,l){var c=[];t.forEach(function(o){var t=e.querySelectorAll(o),r=i.querySelectorAll(o);if(this.log&&this.log("Pjax switch",o,t,r),t.length!==r.length)throw"DOM doesn’t look the same on new loaded page: ’"+o+"’ - new "+t.length+", old "+r.length;n(t,function(t,e){var i=r[e];this.log&&this.log("newEl",t,"oldEl",i);var n=s[o]?s[o].bind(this,i,t,l,a[o]):u.outerHTML.bind(this,i,t,l);c.push(n)},this)},this),this.state.numPendingSwitches=c.length,c.forEach(function(t){t()})}},{"./foreach-els":7,"./switches":18}],18:[function(t,e,i){var d=t("./events/on");e.exports={outerHTML:function(t,e){t.outerHTML=e.outerHTML,this.onSwitch()},innerHTML:function(t,e){t.innerHTML=e.innerHTML,""===e.className?t.removeAttribute("class"):t.className=e.className,this.onSwitch()},switchElementsAlt:function(t,e){if(t.innerHTML=e.innerHTML,e.hasAttributes())for(var i=e.attributes,n=0;n<i.length;n++)t.attributes.setNamedItem(i[n].cloneNode());this.onSwitch()},replaceNode:function(t,e){t.parentNode.replaceChild(e,t),this.onSwitch()},sideBySide:function(t,e,i,n){var o=Array.prototype.forEach,r=[],s=[],a=document.createDocumentFragment(),l="animationend webkitAnimationEnd MSAnimationEnd oanimationend",c=0,u=function(t){t.target===t.currentTarget&&--c<=0&&r&&(r.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)}),s.forEach(function(t){t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")}),r=s=null,this.onSwitch())}.bind(this);n=n||{},o.call(t.childNodes,function(t){r.push(t),t.classList&&!t.classList.contains("js-Pjax-remove")&&(t.hasAttribute("data-pjax-classes")&&(t.className=t.className.replace(t.getAttribute("data-pjax-classes"),""),t.removeAttribute("data-pjax-classes")),t.classList.add("js-Pjax-remove"),n.callbacks&&n.callbacks.removeElement&&n.callbacks.removeElement(t),n.classNames&&(t.className+=" "+n.classNames.remove+" "+(i.backward?n.classNames.backward:n.classNames.forward)),c++,d(t,l,u,!0))}),o.call(e.childNodes,function(t){var e;t.classList&&(e="",n.classNames&&(e=" js-Pjax-add "+n.classNames.add+" "+(i.backward?n.classNames.forward:n.classNames.backward)),n.callbacks&&n.callbacks.addElement&&n.callbacks.addElement(t),t.className+=e,t.setAttribute("data-pjax-classes",e),s.push(t),a.appendChild(t),c++,d(t,l,u,!0))}),t.className=e.className,t.appendChild(a)}}},{"./events/on":4}],19:[function(t,e,i){var n;e.exports=(n=0,function(){var t="pjax"+(new Date).getTime()+"_"+n;return n++,t})},{}],20:[function(t,e,i){e.exports=function(t){if(null===t||"object"!=typeof t)return t;var e,i=t.constructor();for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}},{}],21:[function(t,e,i){e.exports=function(t,e,i){for(var n=0;n<e.length;n++)for(var o=t.querySelectorAll(e[n]),r=0;r<o.length;r++)if(o[r].contains(i))return!0;return!1}},{}],22:[function(t,e,i){e.exports=function(t){if(null==t)return null;for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}},{}],23:[function(t,e,i){e.exports=function(){}},{}],24:[function(t,e,i){e.exports=function(t,e,i){var n=new RegExp("([?&])"+e+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(n)?t.replace(n,"$1"+e+"="+i+"$2"):t+o+e+"="+i}},{}]},{},[1])(1)});var body=$("body");function initial(){"use strict";video(),gallery(),player(),pagination(),popup(),subscribe()}function video(){"use strict";$(".post-content").fitVids()}function gallery(){"use strict";document.querySelectorAll(".kg-gallery-image img").forEach(function(t){var e=t.closest(".kg-gallery-image"),i=t.attributes.width.value/t.attributes.height.value;e.style.flex=i+" 1 0%"})}function player(){"use strict";var o,t=jQuery(".player"),r=jQuery(".player-audio"),s=t.find(".post-media"),a=t.find(".post-image"),l=t.find(".post-title-link"),c=t.find(".post-meta"),e=jQuery(".player-progress"),i=1,u=jQuery(".player-button-play"),n=jQuery(".player-button-backward"),d=jQuery(".player-button-forward"),h=jQuery(".player-button-speed"),f=(jQuery(".player-button-close"),jQuery(".player-time-current")),p=jQuery(".player-time-duration");jQuery(".site").on("click",".js-play",function(){var t,e=jQuery(this),i=e.attr("data-url"),n=e.attr("data-id");jQuery(".player-external").length&&body.addClass("player-opened"),n!==s.attr("data-id")&&(r.attr("src",i),a.attr("data-srcset",e.find(".post-image").attr("data-srcset")),lazySizes.loader.unveil(a[0]),l.text(e.closest(".post").find(".post-title-link").text()),c.html(e.closest(".post").find(".post-meta").html()),jQuery(".post-"+s.attr("data-id")).find(".icon").removeClass("icon-pause"),s.attr("data-id",n),u.attr("data-id",n),o=jQuery('[data-id="'+n+'"]').find(".icon-play")),r[0].paused?void 0!==(t=r[0].play())&&t.then(function(){e.find(".icon").addClass("icon-pause"),o&&o.addClass("icon-pause")}).catch(function(t){console.log(t)}):(r[0].pause(),e.find(".icon").removeClass("icon-pause"),o&&o.removeClass("icon-pause"))}),r.on("loadedmetadata",function(){p.text(new Date(1e3*r[0].duration).toISOString().substr(11,8)),r[0].addEventListener("timeupdate",function(t){f.text(new Date(1e3*t.target.currentTime).toISOString().substr(11,8)),e.css("width",t.target.currentTime/r[0].duration*100+"%")})}),n.on("click",function(){r[0].currentTime=r[0].currentTime-10}),d.on("click",function(){r[0].currentTime=r[0].currentTime+30}),h.on("click",function(){i<2?i+=.5:i=1,r[0].playbackRate=i,h.text(i+"x")})}function pagination(){"use strict";var t=$(".post-feed");body.hasClass("paged-next")&&t.infiniteScroll({append:".post",button:".infinite-scroll-button",debug:!1,hideNav:".pagination",path:".pagination .older-posts",scrollThreshold:!1,status:".infinite-scroll-status"})}function popup(){"use strict";jQuery(".js-popup").on("click",function(){jQuery(this).parent().toggleClass("popup-opened")})}function subscribe(){"use strict";var t=jQuery(".header-button-subscribe"),e=t.text();t.on("click",function(){t.parent().hasClass("popup-opened")?t.html('<i class="icon icon-window-close"></i>'):t.html(e)})}window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.loadHidden=!1,document.addEventListener("lazyloaded",function(t){"use strict";$(t.target).parent(".site-cover").length&&$(t.target).parent().addClass("initialized")}),function(){initial();new Pjax({selectors:["title",".site-content",".site-cover"]});document.addEventListener("pjax:success",initial)}();
//# sourceMappingURL=main.min.js.map